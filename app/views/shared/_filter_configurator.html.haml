#filter-accordion{role: 'tablist', style: 'margin-bottom: 0.5rem'}
  .card
    #filter-header.card-header{role: 'tab'}
      %h5.mb-0
        = t('.filter')
    #filter-content.collapse.show{role: 'tabpanel'}
      = form_tag filter_configurator_path, method: :patch, id: 'filter-form' do
        .card-block.row{style: 'padding: 0.5rem'}
          .col-sm-4
            = select_tag :preset_ranking_start, options_for_select(preset_dates, ranking_configuration[:ranking_start]), class: 'preset-date', data: {field: '#ranking-start'}
            = text_field_tag :ranking_start, ranking_configuration[:ranking_start], class: 'filter-input', id: 'ranking-start'
            %br
            = select_tag :preset_ranking_end, options_for_select(preset_dates, ranking_configuration[:ranking_end]), class: 'preset-date', data: {field: '#ranking-end'}
            = text_field_tag :ranking_end, ranking_configuration[:ranking_end], class: 'filter-input', id: 'ranking-end'
          .col-sm-4
            = label_tag :large_tournament_multiplier
            = check_box_tag :large_tournament_multiplier, true, ranking_configuration[:large_tournament_multiplier], class: 'filter-input', id: 'large-tournament-multiplier'
            = label_tag :widespread_use_multiplier
            = check_box_tag :widespread_use_multiplier, true, ranking_configuration[:widespread_use_multiplier], class: 'filter-input', id: 'widespread-use-multiplier'
          .col-sm-4
            = select_tag :use_ranking_data, options_for_select(%w[swiss elimination swiss+elimination], ranking_configuration[:use_ranking_data]), class: 'filter-input', id: 'use-ranking-data'

- content_for :javascript do
  :coffeescript
    $ ->
      $('.filter-input').on 'change', (e) ->
        $(e.target).closest('form').trigger('submit')

      $('.preset-date').on 'change', (e) ->
        $($(e.target).data('field')).val($(e.target).val())
        $(e.target).closest('form').trigger('submit')

      form = $('#filter-form')
      form.submit (e) ->
        $.ajax
          type: 'PATCH'
          url: form.attr('action')
          data: form.serialize()
          success: (data) ->
            console.log data
        e.preventDefault()
        location.reload()
